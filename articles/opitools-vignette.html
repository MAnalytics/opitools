<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An Opinion Analytical Tool for Big Digital Text Document - A User Guide • opitools</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="An Opinion Analytical Tool for Big Digital Text Document - A User Guide">
<meta property="og:description" content="opitools">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">opitools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.8.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/opitools-vignette.html">An Opinion Analytical Tool for Big Digital Text Document - A User Guide</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/MAnalytics/opitools/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="opitools-vignette_files/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="opitools-vignette_files/kePrint-0.0.1/kePrint.js"></script><link href="opitools-vignette_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>An Opinion Analytical Tool for Big Digital Text Document - A User Guide</h1>
                        <h4 class="author"><div class="line-block">
<code>Author:</code><br><code>Adepeju, M.</code><br><code>Big Data Centre, Manchester Metropolitan University, Manchester, M15 6BH, UK</code>
</div></h4>
            
            <h4 class="date"><div class="line-block">
<code>Date:</code><br><code>2021-08-31</code>
</div></h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MAnalytics/opitools/blob/master/vignettes/opitools-vignette.Rmd"><code>vignettes/opitools-vignette.Rmd</code></a></small>
      <div class="hidden name"><code>opitools-vignette.Rmd</code></div>

    </div>

    
        <div class="abstract">
      <p class="abstract">Abstract</p>
      The development of <code>'opitools'</code> is instigated by the lack of tools for performing opinion impact analysis of a digital text document (DTD). The package includes a number of interrelated functions for exploring and analyzing text records in order to complete an opinion impact analysis of a digital text document (DTD). The utility of <code>Opitools</code> is demonstrated with examples from the law enforcement, electoral politics and product marketing.
    </div>
    
<style type="text/css">

h1.title {
  font-size: 26px;
  line-height: 130%;
  color: Black;
  text-align: center;
}

h2.subtitle {
  font-size: 13px;
  line-height: 120%;
  color: Black;
  text-align: center;
}

h4.author { /* Header 4 - and the author and data headers use this too  */
  font-size: 17px;
  font-family: "Arial";
  color: Black;
  text-align: center;
}
h4.date { /* Header 4 - and the author and data headers use this too  */
  font-size: 17px;
  font-family: "Arial", Times, serif;
  color: Black;
  text-align: center;
}

h4.abstract { /* Header 4 - and the author and data headers use this too  */
  font-size: 10px;
  font-family: "Arial", Times, serif;
  color: black;
  text-align: center;
}

h4.institute{ /* Header 4 - and the author and data headers use this too  */
  font-size: 10px;
  font-family: "Arial", Times, serif;
  color: black;
  text-align: center;
}

body, td {
   font-size: 14px;
}
code.r{
  font-size: 13px;
}
pre {
  font-size: 13px
}
h1 { /* Header 1 */
  font-size: 16px;
  color: DarkBlue;
}
h2 { /* Header 2 */
    font-size: 16px;
  color: DarkBlue;
}
h3 { /* Header 3 */
  font-size: 15px;
  font-family: "Times New Roman", Times, serif;
  color: DarkBlue;

</style>
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>The <code>'opitools'</code> provides the mechanism for carrying out opinion impact analysis of a digital text document (DTD). The package functions can be categorized into two groups, namely (a) exploratory - for exploring terms in a document, e.g. importance of words and their statistical distribution, and (b) analytical - for computing metrics on the impacts of a theme or subject on the opinion expressed in a document. The potentials of <code>opitools</code> for application across a wide variety of domains is demonstrated with examples from the <code>law enforcement</code> to examine the impacts of covid-19 on the citizens’ opinion of their neighbourhood policing; from <code>electoral politics</code> to examine the extent to which a political candidate drives viewers opinion of a political debate; and from <code>product marketing</code> to examine what features in and around a train station influence customers reviews of the train services;</p>
<div id="set-the-working-directory" class="section level3">
<h3 class="hasAnchor">
<a href="#set-the-working-directory" class="anchor"></a>Set the Working directory</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">WORKING_DIR</span> <span class="op">&lt;-</span> <span class="st">'C:/R/Github/JGIS_Policing_COVID-19'</span>

<span class="co">#setting working directory</span>
<span class="fu"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span><span class="op">(</span><span class="va">WORKING_DIR</span><span class="op">)</span></code></pre></div>
</div>
<div id="instal-libraries" class="section level3">
<h3 class="hasAnchor">
<a href="#instal-libraries" class="anchor"></a>Instal libraries</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/MAnalytics/opitools">opitools</a></span><span class="op">)</span> <span class="co">#for impact analysis</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/">knitr</a></span><span class="op">)</span> <span class="co">#for rendering the vignette</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rvest.tidyverse.org/">rvest</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/">kableExtra</a></span><span class="op">)</span> <span class="co">#for designing tables</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span> <span class="co">#for data analysis</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/cowplot/">cowplot</a></span><span class="op">)</span> <span class="co">#for plot design</span></code></pre></div>
</div>
</div>
<div id="example-datasets" class="section level1">
<h1 class="hasAnchor">
<a href="#example-datasets" class="anchor"></a>Example datasets</h1>
<p>The following datasets will be employed in our demonstration. The datasets are automatically installed upon the installation of <code>Opitools</code>.</p>
<table class="table table">
<caption>
Table 1. <code>Example datasets</code>
</caption>
<thead><tr>
<th style="text-align:left;">
SN
</th>
<th style="text-align:left;">
Data
</th>
<th style="text-align:left;">
Application
</th>
<th style="text-align:left;">
Details
</th>
<th style="text-align:left;">
Data Source
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
1
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
<code>policing_dtd</code>
</td>
<td style="text-align:left;width: 12em; background-color: white !important;">
<code>Law Enforcement</code>
</td>
<td style="text-align:left;width: 16em; background-color: white !important;">
A digital text document (DTD) containing twitter posts, within a geographical neighbourhood, on police/policing during the 2020 COVID-19 pandemic
</td>
<td style="text-align:left;">
www.twitter.com
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
2
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
<code>debate_dtd</code>
</td>
<td style="text-align:left;width: 12em; background-color: white !important;">
<code>Electoral Politics</code>
</td>
<td style="text-align:left;width: 16em; background-color: white !important;">
A DTD containing individual comments on the video showing the debate between two United States presidential candidates (Donald Trump and Hillary Clinton) in September of 2016. (Credit: NBC News).
</td>
<td style="text-align:left;">
www.youtube.com
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
3
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
<code>reviews_dtd</code>
</td>
<td style="text-align:left;width: 12em; background-color: white !important;">
<code>Product Marketing</code>
</td>
<td style="text-align:left;width: 16em; background-color: white !important;">
A DTD containing customers reviews of the Piccadilly train station (Manchester, UK). The records cover from July 2016 to March 2021.
</td>
<td style="text-align:left;">
www.tripadvisor.co.uk
</td>
</tr>
</tbody>
</table>
</div>
<div id="functions" class="section level1">
<h1 class="hasAnchor">
<a href="#functions" class="anchor"></a>Functions</h1>
<p>The function in <code>'opitools'</code> can be categorized into two groups, namely (1) exploratory - for exploring terms or words in a text document, and (2) analytical - for computing metrics for the impact analysis.</p>
<div id="exploratory-function" class="section level3">
<h3 class="hasAnchor">
<a href="#exploratory-function" class="anchor"></a>Exploratory function</h3>
<p>Table 2 shows two key exploratory functions embedded in <code>'opitools'</code>, namely <code>'word_distrib'</code> and <code>'word_imp'</code>. Details as follow:</p>
<table class="table table">
<caption>
Table 2. <code>Exploratory</code> functions
</caption>
<thead><tr>
<th style="text-align:left;">
SN
</th>
<th style="text-align:left;">
Function
</th>
<th style="text-align:left;">
Title
</th>
<th style="text-align:left;">
Description
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
1
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
<code>word_distrib</code>
</td>
<td style="text-align:left;width: 12em; background-color: white !important;">
<code>Words Distribution</code>
</td>
<td style="text-align:left;width: 16em; background-color: white !important;">
Examines the extent to which the terms (words) in a DTD follow the Zipf’s distribution (Zipf 1934) - the ideal natural language model
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
2
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
<code>word_imp</code>
</td>
<td style="text-align:left;width: 12em; background-color: white !important;">
<code>Importance of words (terms) embedded in a text document</code>
</td>
<td style="text-align:left;width: 16em; background-color: white !important;">
Produces a table or graphic that highlights the importance of individual terms (or words) in a DTD.
</td>
</tr>
</tbody>
</table>
</div>
<div id="example-data-exploration" class="section level3">
<h3 class="hasAnchor">
<a href="#example-data-exploration" class="anchor"></a>Example data exploration</h3>
<p>Below, the use of <code>'word_distrib'</code> and <code>'word_imp'</code> functions is demonstrated with the example datasets <code>'tweets'</code> (see documentations). The <code>'word_distrib'</code> can be used to answer a RQ such as; “How similar is a given DTD to the ideal natural language text?”. In other words, does the word usage in a DTD follow the ideal natural language usage represeted by the Zipf’s distribution <span class="citation">(Zipf 1936)</span>? Basically, the function examines the log rank-frequency of the terms across the document. The level of similarity is examined by the extent to which the frequency of each term is inversely proportional to their rank in a frequency table. Using a randomized Twitter data (embedded in the package),</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># Load data</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">tweets</span><span class="op">)</span>

<span class="co"># Get the texts</span>
<span class="va">tweets_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">tweets</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span><span class="op">)</span>

<span class="co"># Run function</span>
<span class="va">plt</span> <span class="op">=</span> <span class="fu"><a href="../reference/word_distrib.html">word_distrib</a></span><span class="op">(</span>textdoc <span class="op">=</span> <span class="va">tweets_dat</span><span class="op">)</span>

<span class="co">#Note: `tweets_dat` is a dataframe </span>

<span class="co">#Show Zipf's distribution:</span>
<span class="va">plt</span><span class="op">$</span><span class="va">plot</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="zipf.png" alt="Figure 1: Data freq. plot vs. Zipf's distribution"><p class="caption">
Figure 1: Data freq. plot vs. Zipf’s distribution
</p>
</div>
<p>For a natural language text, the Zipf’s distribution plot has a negative slope with each term falling on a straight line. Any variance from this (ideal) trend can be attributed to imperfections in the term usage. For example, the presence of strange terms or ‘made-up’ words can cause a deviation from the ideal trend. The result of our example dataaset is shown in Figure 1. The graph can be divided into the three sections: the upper, the middle and the lower sections. By fitting a regression line (an ideal Zipf’s distribution), we can see what the slope of the upper section is quite different from the middle and the lower sections of the graph. The variance at the high rank terms (usually, common terms, such as ‘the’, ‘of’, and ‘at’,) indicates an imperfection because of lack of perfect alignment with the straight line. For Twitter data, this variance suggests a significant use of abbreviated terms, such as using “&amp;” or “nd” instead of the term “<code>and</code>”. Apart from the small variance at the upper section of the graph, we can state that the law holds within most parts of the document.</p>
<p>The second exploratory function <code>'word_imp'</code> can be used to highlight the importance of each terms in a DTD. The level of importance can then be used to identify different themes (or subjects) from the DTD. Two measures, namely (i) <code>'term frequency (tf)'</code> and <code>term frequency inverse document frequency (tf-idf)</code> <span class="citation">(Silge and Robinson 2016)</span> can be used to highlight the importance of terms in a DTD. In Figure 2, results 1, 2 and 3 are generated from the datasets; <code>policing_dtd</code>, <code>debate_dtd</code> <code>reviews_dtd</code>, respectively. The results for each data sample based on the <code>'tf'</code> and <code>'tf_idf'</code> measures are labeled as A and B, respectively. The function draws from <code>wordcloud2</code> package in R <span class="citation">(Lang and Chien 2018)</span>, in order to highlight words importance as shown in Figure 2.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co">#Load datasets</span>

<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"policing_dtd"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"debate_dtd"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"reviews_dtd"</span><span class="op">)</span>


<span class="co">#Words importance of public tweets on neighbourhood policing </span>
<span class="co">#based on  (a) ‘tf’ and (b) 'tf-idf' metrics</span>
<span class="va">p1a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/word_imp.html">word_imp</a></span><span class="op">(</span>textdoc <span class="op">=</span> <span class="va">policing_dtd</span>, metric<span class="op">=</span> <span class="st">"tf"</span>, 
                           words_to_filter<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"police"</span>,<span class="st">"policing"</span><span class="op">)</span><span class="op">)</span>

<span class="co">#Note: `policing_dtd` is a dataframe </span>

<span class="va">p1b</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/word_imp.html">word_imp</a></span><span class="op">(</span>textdoc <span class="op">=</span> <span class="va">policing_dtd</span>, metric<span class="op">=</span> <span class="st">"tf-idf"</span>, 
                           words_to_filter<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"police"</span>,<span class="st">"policing"</span><span class="op">)</span><span class="op">)</span>

<span class="co">#Note: 'words_to_filter' parameter is used to eliminate non-necessary words that </span>
<span class="co">#may be too dominant in the DTD.</span>

<span class="co">#Words importance  of comments on a video of a political debate </span>
<span class="co">#based on (a) ‘tf’ and (b) 'tf-idf' metrics</span>
<span class="va">p2a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/word_imp.html">word_imp</a></span><span class="op">(</span>textdoc <span class="op">=</span> <span class="va">debate_dtd</span>, metric<span class="op">=</span> <span class="st">"tf"</span>, 
                words_to_filter<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"trump"</span>,<span class="st">"hillary"</span><span class="op">)</span><span class="op">)</span> 

<span class="va">p2b</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/word_imp.html">word_imp</a></span><span class="op">(</span>textdoc <span class="op">=</span> <span class="va">debate_dtd</span>, metric<span class="op">=</span> <span class="st">"tf-idf"</span>, 
                words_to_filter<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"trump"</span>,<span class="st">"hillary"</span><span class="op">)</span><span class="op">)</span> 

<span class="co">#Words importance of customer reviews of a transport service </span>
<span class="co">#based on (a) ‘tf’ and (b) 'tf-idf' metrics </span>
<span class="va">p3a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/word_imp.html">word_imp</a></span><span class="op">(</span>textdoc <span class="op">=</span> <span class="va">reviews_dtd</span>, metric<span class="op">=</span> <span class="st">"tf"</span>, 
                words_to_filter<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"station"</span><span class="op">)</span><span class="op">)</span> 

<span class="va">p3b</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/word_imp.html">word_imp</a></span><span class="op">(</span>textdoc <span class="op">=</span> <span class="va">reviews_dtd</span>, metric<span class="op">=</span> <span class="st">"tf-idf"</span>,  
                words_to_filter<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"station"</span><span class="op">)</span><span class="op">)</span> 

<span class="co">#outputs</span>
<span class="va">p1a</span><span class="op">$</span><span class="va">plot</span>; <span class="va">p1b</span><span class="op">$</span><span class="va">plot</span>; <span class="va">p2a</span><span class="op">$</span><span class="va">plot</span>; <span class="va">p2b</span><span class="op">$</span><span class="va">plot</span>; <span class="va">p3a</span><span class="op">$</span><span class="va">plot</span>; <span class="va">p3b</span><span class="op">$</span><span class="va">plot</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="wordcloud.png" alt="Figure 2: Highlighting words importance from a DTD"><p class="caption">
Figure 2: Highlighting words importance from a DTD
</p>
</div>
<p>In Figure 2, the size of a word represents its level of importance according to a selected metric (i.e. ‘tf’ or ‘tf-idf’). From each representation, a user can easily identify (related) words that denote certain themes or subjects within the document. In Figure 1A, words such as ‘lockdown’, ‘infect’ and ‘covid’, refer to the sentiments relating to the pandemic under which the police were operating as at the time tweets were posted. “Does the pandemic has any significant impacts on the public opinion of the police activities during the period?”. This is an example of the RQs from social science research that can be investigated using <code>Opitools</code>. On the other hand, Figure 1B shows that the word importance may vary significantly by the choice of the measure between ‘tf’ and ‘tf-idf’. Figure 1B shows that a significant amount of the most important words using <code>tf-idf</code> are distinct from those ones resulting from using <code>tf</code>.</p>
<p>In marketing research (Figure 3A), we see that related words, such as ‘restaurant’, ‘shops’, ‘food’ and ‘coffee’, denoting <code>refreshment items</code>, are highlighted as been the most important to the customers. “<code>Do these refreshment items impact the overall customers' opinion of the train services?</code>”. Similarly, related words such as ‘board’, ‘map’ and ‘display’, denoting <code>signages</code> around the station may have influenced customers opinion of the station.</p>
</div>
<div id="analytical-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#analytical-functions" class="anchor"></a>Analytical functions</h3>
<p>Table 3 shows the list of analytical functions of the <code>'Opitools'</code> package.</p>
<table class="table table">
<caption>
Table 3. <code>Impact Analytical</code> function
</caption>
<thead><tr>
<th style="text-align:left;">
SN
</th>
<th style="text-align:left;">
Function
</th>
<th style="text-align:left;">
Title
</th>
<th style="text-align:left;">
Description
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
3
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
<code>opi_score</code>
</td>
<td style="text-align:left;width: 12em; background-color: white !important;">
<code>Computes the overall opinion score of a text document</code>
</td>
<td style="text-align:left;width: 16em; background-color: white !important;">
Given a text document, this function computes the overall opinion score based on the proportion of text records classified as expressing positive, negative or a neutral sentiment about the subject.
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
4
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
<code>opi_sim</code>
</td>
<td style="text-align:left;width: 12em; background-color: white !important;">
<code>Simulates the opinion expectation distribution of a text document</code>
</td>
<td style="text-align:left;width: 16em; background-color: white !important;">
This function simulates the expectation distribution of the observed opinion score (computed using the <code>opi_score</code> function).
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
5
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
<code>opi_impact</code>
</td>
<td style="text-align:left;width: 12em; background-color: white !important;">
<code>Computes the statistical significance of impacts of a specified/selected theme (or subject) on the overall opinion score of a document</code>
</td>
<td style="text-align:left;width: 16em; background-color: white !important;">
This function assesses the impacts of a theme (or subject) on the overall opinion computed for a text document. The text records relating to the theme in question should be identified and provided as input to this function
</td>
</tr>
</tbody>
</table>
<p>The key analytical function is the <code><a href="../reference/opi_impact.html">opi_impact()</a></code> which draws from <code><a href="../reference/opi_score.html">opi_score()</a></code> and <code><a href="../reference/opi_sim.html">opi_sim()</a></code> to compute the observed opinion score and the expectations, respectively. The observed opinion score is compared with the expectation in order to derive the statistical significance of impacts of a specified/selected theme. Using the example dataset <code>policing_dtd</code>:</p>
<p>The impact analysis can be performed as follows:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co">#Application: Law enforcement</span>

<span class="co">#Load DTD</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">policing_dtd</span><span class="op">)</span>

<span class="co">#Load theme keywords</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">covid_theme</span><span class="op">)</span>

<span class="co"># Run the analysis</span>
<span class="va">output1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/opi_impact.html">opi_impact</a></span><span class="op">(</span><span class="va">policing_dtd</span>, theme_keys<span class="op">=</span><span class="va">covid_theme</span>, metric <span class="op">=</span> <span class="fl">1</span>,
                       fun <span class="op">=</span> <span class="cn">NULL</span>, nsim <span class="op">=</span> <span class="fl">99</span>, alternative<span class="op">=</span><span class="st">"two.sided"</span>,
                       quiet<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>

<span class="co">#Note: `policing_dtd` is a dataframe </span>

<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">output1</span><span class="op">)</span></code></pre></div>
<p>To print results:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="op">&gt;</span><span class="st"> </span>output1</span>
<span id="cb6-3"><a href="#cb6-3"></a></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="op">$</span>test</span>
<span id="cb6-5"><a href="#cb6-5"></a>[<span class="dv">1</span>] <span class="st">"Test of significance (Randomization testing)"</span></span>
<span id="cb6-6"><a href="#cb6-6"></a></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="op">$</span>criterion</span>
<span id="cb6-8"><a href="#cb6-8"></a>[<span class="dv">1</span>] <span class="st">"two.sided"</span></span>
<span id="cb6-9"><a href="#cb6-9"></a></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="op">$</span>exp_summary</span>
<span id="cb6-11"><a href="#cb6-11"></a>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span id="cb6-12"><a href="#cb6-12"></a> <span class="fl">-8.240</span>  <span class="fl">-5.880</span>  <span class="fl">-5.880</span>  <span class="fl">-4.837</span>  <span class="fl">-3.530</span>  <span class="fl">-1.180</span> </span>
<span id="cb6-13"><a href="#cb6-13"></a></span>
<span id="cb6-14"><a href="#cb6-14"></a><span class="op">$</span>p_table</span>
<span id="cb6-15"><a href="#cb6-15"></a></span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="op">|</span>observed_score <span class="op">|</span>S_beat <span class="op">|</span>nsim <span class="op">|</span>pvalue <span class="op">|</span>signif <span class="op">|</span></span>
<span id="cb6-17"><a href="#cb6-17"></a><span class="er">|:</span><span class="op">--------------</span><span class="er">|:</span><span class="op">------</span><span class="er">|:</span><span class="op">----</span><span class="er">|:</span><span class="op">------</span><span class="er">|:</span><span class="op">------</span><span class="er">|</span></span>
<span id="cb6-18"><a href="#cb6-18"></a><span class="er">|</span><span class="op">-</span><span class="fl">5.88</span>          <span class="op">|</span><span class="dv">51</span>     <span class="op">|</span><span class="dv">99</span>   <span class="op">|</span><span class="fl">0.52</span>   <span class="op">|</span><span class="st">'      |</span></span>
<span id="cb6-19"><a href="#cb6-19"></a></span>
<span id="cb6-20"><a href="#cb6-20"></a><span class="st">$p_key</span></span>
<span id="cb6-21"><a href="#cb6-21"></a><span class="st">[1] "0.99'"   "</span><span class="fl">0.05</span><span class="op">*</span><span class="st">"   "</span><span class="fl">0.025</span><span class="op">**</span><span class="st">" "</span><span class="fl">0.01</span><span class="op">**</span><span class="er">*</span><span class="st">"</span></span>
<span id="cb6-22"><a href="#cb6-22"></a></span>
<span id="cb6-23"><a href="#cb6-23"></a><span class="st">$p_formula</span></span>
<span id="cb6-24"><a href="#cb6-24"></a><span class="st">[1] "</span>(S_beat <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)<span class="op">/</span>(nsim <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)<span class="st">"</span></span>
<span id="cb6-25"><a href="#cb6-25"></a></span>
<span id="cb6-26"><a href="#cb6-26"></a><span class="st">$plot</span></span></code></pre></div>
<ul>
<li>
<p>The descriptions of output variables are as follow:</p>
<ul>
<li><p><code>test</code> - title of the analysis</p></li>
<li><p><code>criterion</code> - criterion for determining the significance value</p></li>
<li><p><code>exp_summary</code> - summary of expected opinion scores</p></li>
<li><p><code>p_table</code> - details of Statistical Significance</p></li>
<li><p><code>p_key</code> - keys for interpreting the statistical significance value</p></li>
<li><p><code>p_formula</code> - function of opinion score employed</p></li>
<li><p><code>plot</code> - plot showing Percentage proportion of classes</p></li>
</ul>
</li>
</ul>
<p>The output shows an overall negative opinion (<code>-5.88</code>) of the public on the neighbourhood policing, and that the pandemic has not had a significant impacts (<code>pvalue</code> = 0.52) on the opinion expressed by the public.</p>
<p>To display the graphics showing the proportion of various sentiment classes (as in Figure ), type <code>output$plot</code> in the console.</p>
<div class="figure" style="text-align: center">
<img src="likert.png" alt="Figure 3: Percentage proportion of classes"><p class="caption">
Figure 3: Percentage proportion of classes
</p>
</div>
<p>Table 4 summarizes the results of impact analysis using all the example datasets in Table 1 with their respective research questions (RQs). The outputs from the law enforcement application (as in above) is entered as the first record of the table. In each example, we employed the same score function (<code>metric = 1</code>, i.e. <code>polarity score = (P - N)/(P + N)*100</code>, where <code>P</code> and <code>N</code> represent <code>positive</code> and <code>negative</code> sentiments, respectively). See the documentation for details.</p>
<table class="table table">
<caption>
Table 4. <code>Impact analysis</code>
</caption>
<thead><tr>
<th style="text-align:left;">
SN.
</th>
<th style="text-align:left;">
RQs
</th>
<th style="text-align:left;">
Primary data
</th>
<th style="text-align:left;">
theme_keys
</th>
<th style="text-align:left;">
criterion
</th>
<th style="text-align:left;">
Score function
</th>
<th style="text-align:left;">
Observed score (S)
</th>
<th style="text-align:left;">
p-value
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
1
</td>
<td style="text-align:left;width: 26em; background-color: white !important;">
Does COVID-19 pandemic influence public opinion on neighourhood policing?
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
<code>policing_dtd</code>
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
<code>covid_theme</code>
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
two.sided
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
Polarity score
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
-5.88
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
0.52
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
2
</td>
<td style="text-align:left;width: 26em; background-color: white !important;">
How does the democratic candidate (Hillary Clinton) affects viewers’ opinion of the presidential debate?
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
<code>debate_dtd</code>
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
direct input
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
two.sided
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
Polarity score
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
-0.33
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
0.93
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
3a
</td>
<td style="text-align:left;width: 26em; background-color: white !important;">
Do the refreshment outlets/items impact customers’ opinion of the Piccadilly train services?
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
<code>reviews_dtd</code>
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
<code>refreshment_theme</code>
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
two.sided
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
Polarity score
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
67.92
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
0.01
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;border-right:1px solid;">
3b
</td>
<td style="text-align:left;width: 26em; background-color: white !important;">
Do the signages influence customers’ opinion of the Piccadilly train services?
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
<code>reviews_dtd</code>
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
<code>signage_theme</code>
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
two.sided
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
Polarity score
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
67.92
</td>
<td style="text-align:left;width: 8em; background-color: white !important;">
0.1
</td>
</tr>
</tbody>
</table>
<p>In the application to electoral politics, we attempt to identify factors that may have contributed to viewers opinion of a presidential debate. The statistics (<code>S=-0.33, pvalue = 0.93</code>) show that viewers opinion of the debate is negative. However, viewers opinion of the democratic candidate (Hillary Clinton) has no impacts of their overall negative opinion of the debate.</p>
<p>Lastly in the marketing application (3a &amp; 3b), we tested the impacts of two themes, namely; <code>refreshment items/outlets</code> and the <code>signages</code>, on the customers’ opinions of the Piccadilly train services. The statistics (<code>S=67.92, pvalue = 0.01</code>) show an overall positive customers’ opinions of the train station or services, with the refreshments items/outlets (in and around the station) contributing significantly towards the positive opinions. On the other hand, the the signages (in and around the station) have no significant influence (p=0.1) on the positive review of the train service.</p>
</div>
<div id="using-a-user-defined-opinion-score-function" class="section level3">
<h3 class="hasAnchor">
<a href="#using-a-user-defined-opinion-score-function" class="anchor"></a>Using a user-defined opinion score function</h3>
<p>An opinion score function may be defined in a variety of ways depending on the application domain. For instance, <span class="citation">(Razorfish 2009)</span> defines customers’ opinion score of a product brand as <code>score = (P + O - N)/(P + O + N)</code>, where <code>P</code>, <code>O</code>, and <code>N</code>, represent the amount/proportion of positive, neutral and negative, sentiments, respectively. In order for a user to be able to plug-in their own opinion score function, we provided the parameter <code>fun</code> in the <code>opi_impact</code> function. This allow users to integrate new functions and test new theories. Employing the example function, we can re-run the analysis as follows:</p>
<ol style="list-style-type: lower-alpha">
<li>Define the user-defined function:</li>
</ol>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co">#The equation</span>
<span class="va">Score</span> <span class="op">=</span> <span class="op">(</span><span class="va">P</span> <span class="op">+</span> <span class="va">O</span> <span class="op">-</span> <span class="va">N</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="va">P</span> <span class="op">+</span> <span class="va">O</span> <span class="op">+</span> <span class="va">N</span><span class="op">)</span>

<span class="co">#Corresponding function</span>
<span class="va">myfun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">P</span>, <span class="va">N</span>, <span class="va">O</span><span class="op">)</span><span class="op">{</span>
   <span class="va">score</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">P</span> <span class="op">+</span> <span class="va">O</span> <span class="op">-</span> <span class="va">N</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="va">P</span> <span class="op">+</span> <span class="va">O</span> <span class="op">+</span> <span class="va">N</span><span class="op">)</span>
   <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">score</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<ol start="2" style="list-style-type: lower-alpha">
<li>Integrate the function and run analysis (for example)</li>
</ol>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">output</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/opi_impact.html">opi_impact</a></span><span class="op">(</span><span class="va">debate_dtd</span>, theme_keys<span class="op">=</span><span class="va">keys</span>, metric <span class="op">=</span> <span class="fl">5</span>,
                       fun <span class="op">=</span> <span class="va">myfun</span>, nsim <span class="op">=</span> <span class="fl">99</span>, alternative<span class="op">=</span><span class="st">"two.sided"</span>,
                       quiet<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="conclusion" class="section level1">
<h1 class="hasAnchor">
<a href="#conclusion" class="anchor"></a>Conclusion</h1>
<p>The <code>opitools</code> package has been developed in order to address the lack of mechanism for carrying out impact analysis of opinions for digital text document (DTD). The utility of the package was originally demonstrated in <span class="citation">(Adepeju and Jimoh 2021)</span> in its application in law enforcement domain. In addition, this vignette demonstrates the potentials of the package for application across a wide variety of areas, with examples from electoral politics and product marketing. This package is being updated on a regular basis to add more functionalities.</p>
<p>We encourage users to report any bugs encountered while using the package so that they can be fixed immediately. Welcome contributions to this package which will be acknowledged accordingly.</p>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references">
<div id="ref-Adepeju2021">
<p>Adepeju, M., and F. Jimoh. 2021. “An Analytical Framework for Measuring Inequality in the Public Opinions on Policing – Assessing the Impacts of Covid-19 Pandemic Using Twitter Data.” <em>Journal of Geographical Information System (in Press)</em>.</p>
</div>
<div id="ref-Dawei2018">
<p>Lang, Dawei, and Guan-tin Chien. 2018. <em>Wordcloud2: Create Word Cloud by ’Htmlwidget’</em>. <a href="https://CRAN.R-project.org/package=wordcloud2">https://CRAN.R-project.org/package=wordcloud2</a>.</p>
</div>
<div id="ref-Razorfish2019">
<p>Razorfish. 2009. <em>Fluent: The Razorfish Social Influence Marketing Report</em>. Atlanta, United States.</p>
</div>
<div id="ref-Silge2016">
<p>Silge, J., and D. Robinson. 2016. “"Text Mining and Analysis Using Tidy Data Principles in R".” <em>Journal of Open Source Software</em> 1: 37.</p>
</div>
<div id="ref-Zipf1936">
<p>Zipf, G. 1936. <em>The Psychobiology of Language</em>. Routledge.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Monsuru Adepeju.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
